include $(SFDIR)/etc/opt.mk
REV = $(shell git rev-parse HEAD)

all: clean libscifor.a libscifor_deb.a version

allmod: COMVARS BROYDEN BRENT CGFIT CHRONOBAR FFTGF GREENFUNX INTEGRATE IOTOOLS SQUARE_LATTICE LIST MATRIX SPLINE RANDOM STATISTICS TOOLS STRINGPACK PADE

allmod_deb: COMVARS_DEB CGFIT_DEB CHRONOBAR_DEB FFTGF_DEB GREENFUNX_DEB INTEGRATE_DEB IOTOOLS_DEB SQUARE_LATTICE_DEB LIST_DEB MATRIX_DEB SPLINE_DEB RANDOM_DEB STATISTICS_DEB TOOLS_DEB STRINGPACK_DEB PADE_DEB

libscifor.a: allmod
	@rm -fv $(SFLIB)/$@
	@mv -fv *.mod $(SFINCLUDE)/
	ar cvq $@ `ls *.o | sort | uniq`  
	ranlib $@			  
	@mv -fv *.a $(SFLIB)/		  
	@rm -f *.o			  
	@echo 'LIBRARY IS DONE.........'
	@echo ' '

libscifor_deb.a: allmod_deb
	@rm -fv $(SFLIB)/$@
	@mv -fv *.mod $(SFINCLUDE)/debug/
	ar cvq $@ `ls *.o | sort | uniq`  
	ranlib $@			  
	@mv -fv *.a $(SFLIB)/		  
	@rm -f *.o			  
	@echo 'LIBRARY IS DONE.........'
	@echo ' '

version:
	@echo 'character(len=41),parameter,public :: sf_version = "$(REV)"' > scifor_version.inc

#STD
COMVARS: 
	$(FC) -c $(FFLAG) COMVARS.f90 -I$(SFINCLUDE)
CGFIT: 
	$(FC) -c $(FFLAG) CGFIT.f90 -I$(SFINCLUDE)
BROYDEN: 
	$(FC) -c $(FFLAG) BROYDEN.f90 -I$(SFINCLUDE)
BRENT: 
	$(FC) -c $(FFLAG) BRENT.f90 -I$(SFINCLUDE)
CHRONOBAR: 
	$(FC) -c $(FFLAG) CHRONOBAR.f90 -I$(SFINCLUDE)
FFTGF: 
	$(FC) -c $(FFLAG) FFTGF.f90 -I$(SFINCLUDE)
GREENFUNX: 
	$(FC) -c $(FFLAG) GREENFUNX.f90 -I$(SFINCLUDE)
INTEGRATE: 
	$(FC) -c $(FFLAG) INTEGRATE.f90 -I$(SFINCLUDE)
SQUARE_LATTICE: 
	$(FC) -c $(FFLAG) SQUARE_LATTICE.f90 -I$(SFINCLUDE)
MATRIX: 
	$(FC) -c $(FFLAG) MATRIX.f90 -I$(SFINCLUDE)
SPLINE: 
	$(FC) -c $(FFLAG) SPLINE.f90 -I$(SFINCLUDE)
RANDOM: 
	$(FC) -c $(FFLAG) RANDOM.f90 -I$(SFINCLUDE)
STATISTICS: 
	$(FC) -c $(FFLAG) STATISTICS.f90 -I$(SFINCLUDE)
TOOLS:
	$(FC) -c $(FFLAG) TOOLS.f90 -I$(SFINCLUDE)
PADE:
	$(FC) -c $(FFLAG) PADE.f90 -I$(SFINCLUDE)
IOTOOLS: 
	$(FC) -c $(FFLAG) IOFILE.f90 -I$(SFINCLUDE)	
	$(FC) -c $(FFLAG) SLPLOT.f90 -I$(SFINCLUDE)
	$(FC) -c $(FFLAG) SLREAD.f90 -I$(SFINCLUDE)
	$(FC) -c $(FFLAG) IOTOOLS.f90 -I$(SFINCLUDE)
LIST: 
	$(FC) -c $(FFLAG) D_ORDERED_LIST.f90 -I$(SFINCLUDE)	
	$(FC) -c $(FFLAG) D_UNORDERED_LIST.f90 -I$(SFINCLUDE)	
	$(FC) -c $(FFLAG) Z_UNORDERED_LIST.f90 -I$(SFINCLUDE)	
STRINGPACK: 
	$(FC) -c $(FFLAG) STRING_FUNX_1.f90 -I$(SFINCLUDE)	
	$(FC) -c $(FFLAG) STRING_FUNX_2.f90 -I$(SFINCLUDE)	
	$(FC) -c $(FFLAG) STRINGPACK.f90 -I$(SFINCLUDE)	


#DEB
COMVARS_DEB: 
	$(FC) -c $(DFLAG) COMVARS.f90 -I$(SFINCLUDE)
CGFIT_DEB: 
	$(FC) -c $(DFLAG) CGFIT.f90 -I$(SFINCLUDE)
CHRONOBAR_DEB: 
	$(FC) -c $(DFLAG) CHRONOBAR.f90 -I$(SFINCLUDE)
FFTGF_DEB: 
	$(FC) -c $(DFLAG) FFTGF.f90 -I$(SFINCLUDE)
GREENFUNX_DEB: 
	$(FC) -c $(DFLAG) GREENFUNX.f90 -I$(SFINCLUDE)
INTEGRATE_DEB: 
	$(FC) -c $(DFLAG) INTEGRATE.f90 -I$(SFINCLUDE)
SQUARE_LATTICE_DEB: 
	$(FC) -c $(DFLAG) SQUARE_LATTICE.f90 -I$(SFINCLUDE)
MATRIX_DEB: 
	$(FC) -c $(DFLAG) MATRIX.f90 -I$(SFINCLUDE)
SPLINE_DEB: 
	$(FC) -c $(DFLAG) SPLINE.f90 -I$(SFINCLUDE)
RANDOM_DEB: 
	$(FC) -c $(DFLAG) RANDOM.f90 -I$(SFINCLUDE)
STATISTICS_DEB: 
	$(FC) -c $(DFLAG) STATISTICS.f90 -I$(SFINCLUDE)
TOOLS_DEB:
	$(FC) -c $(DFLAG) TOOLS.f90 -I$(SFINCLUDE)
PADE_DEB:
	$(FC) -c $(DFLAG) PADE.f90 -I$(SFINCLUDE)
IOTOOLS_DEB: 
	$(FC) -c $(DFLAG) IOFILE.f90 -I$(SFINCLUDE)	
	$(FC) -c $(DFLAG) SLPLOT.f90 -I$(SFINCLUDE)
	$(FC) -c $(DFLAG) SLREAD.f90 -I$(SFINCLUDE)
	$(FC) -c $(DFLAG) IOTOOLS.f90 -I$(SFINCLUDE)
LIST_DEB: 
	$(FC) -c $(DFLAG) D_ORDERED_LIST.f90 -I$(SFINCLUDE)	
	$(FC) -c $(DFLAG) D_UNORDERED_LIST.f90 -I$(SFINCLUDE)	
	$(FC) -c $(DFLAG) Z_UNORDERED_LIST.f90 -I$(SFINCLUDE)	
STRINGPACK_DEB: 
	$(FC) -c $(DFLAG) STRING_FUNX_1.f90 -I$(SFINCLUDE)	
	$(FC) -c $(DFLAG) STRING_FUNX_2.f90 -I$(SFINCLUDE)	
	$(FC) -c $(DFLAG) STRINGPACK.f90 -I$(SFINCLUDE)

clean: 
	@rm -fv *.o *.mod *.a 
